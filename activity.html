<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0,user-scalable=no" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="format-detection" content="email=no" />
	<title>e袋洗-活动</title>
	<link rel="stylesheet" type="text/css" href="css/activity.css">
</head>
<body>
<!-- activity_top -->
<div id="activity_top">
	<img src="images/activity_top.png" />
</div>

<!-- activity -->
<div id="activity">
	<!-- activity_bg -->
	<div id="activity_bg">
		<img src="images/activity_packet.png" />
	</div>
	<!-- activity_one -->
	<div id="activity_one" data="">
		支付1元抢红包
	</div>

	<!-- activity_over -->
	<div id="activity_over" style="display: none">
		<b></b>
		活动已结束<br/>下次再来吧
	</div>

	<!-- activity_invite -->
	<div class="activity_invite" style="display: none">
		<!-- activity_invite_text -->
		<div class="activity_invite_text">
			获得助力红包<b class="text">2.57</b>元!
		</div>
		<!-- activity_speed -->
		<div id="activity_speed">
			<div class="activity_speed_con"></div>
			<div class="get_icon"></div>
		</div>
		<!-- activity_invite_btn -->
		<div id="activity_invite_btn"></div>
	</div>

	<!-- activity_invite -->
	<div class="activity_invite" style="display: none">
		<!-- activity_invite_text -->
		<div class="activity_invite_text">
			<div id="get_card">
				恭喜成功抢到洗衣大红包<br/>点击领取<b class="get_icon"></b>
			</div>
			<!-- activity_card -->
			<div id="activity_card">
				50<b></b>
			</div>
		</div>
		<!-- activity_speed -->
		<div id="activity_speed">
			<div class="activity_speed_con"></div>
			<div class="get_icon"></div>	
		</div>				
	</div>

	<!-- activity_invite -->
	<div class="activity_invite0" style="display: none">
		<!-- activity_invite_text -->
		<div class="activity_invite_text mb">
			您已成功助力<b class="text">2.57</b>元<br/>&nbsp;&nbsp;并获得助力金<b class="text">2.57</b>元！
		</div>
		<!-- activity_speed -->
		<div id="activity_speed">
			<div class="activity_speed_con"></div>
			<div class="get_icon"></div>
		</div>
		<!-- activity_want -->
		<div id="activity_want" data="1"></div>
		<!-- activity_hint -->
		<div id="activity_hint">
			点击上方“我要红包”获得助力金
		</div>
	</div>

	<!-- activity_money -->
	<div id="activity_money" style="display: none">
		<span id="money_shi"></span><span id="money_ge"></span><b></b><span id="money_jiao"></span><span id="money_fen"></span>
	</div>

	

</div>

<!-- activity_rule -->
<div id="activity_rule">
	<div id="activity_rule_bg">
		<img src="images/activity_bg05.png" />
	</div>
	<a href="javascript:;">查看活动规则</a>
</div>

<!-- activity_rule_con -->
<div id="activity_rule_con">
	<div class="activity_rule_bg"></div>
	<div id="activity_rule_con0">
		<div class="activity_rule_tit">
			活动规则
		</div>
		<div class="activity_rule_con00">
			<p>
				1.用户需支付1元开启红包池，开启金自动计入红包池内，将此活动分享至微信好友或微信朋友圈进行助力，微信好友可以通过点击助力链接为用户助力；
			</p>
			<p>
				2.每个微信好友（同一微信、手机号、身份证、银行卡、设备视为同一好友）每次助力金额随机分配，微信好友可获得距离自己开启红包池最近一次为他人助力的同等金额，该金额作为总金额的一部分加入助力者红包池；
			</p>
			<p>
				3.用户活动成功后可领取50元洗衣e卡，该e卡可在“e袋洗客户端-我的-e卡”中查看，使用期限为相对有效期3个月；
			</p>
			<p>
				4.一个用户（同一手机号、微信、身份证、设备视为同一用户）该活动仅可参加一次；
			</p>
			<p>
				5.参与活动的1元开启金一经支付，不可退还和提现；
			</p>
			<p>
				6.此活动名额有限，先到先得。
			</p>
			<p>
				7.如用户在活动期间，存在作弊行为（包括但不限于不活跃或虚拟伪造微信好友等），e袋洗平台将有权取消全部活动奖励，并有权对侵权方追究法律责任。
			</p>
		</div>
	</div>
</div>

<!-- activity_friend -->
<div id="activity_friend">
	<div class="activity_rule_bg"></div>
	<div class="activity_rule_tit">
		好友力量榜
	</div>
	<ul>
		<li>
			<img src="images/01.png" />
			<div class="con">
				<p class="tit">李笑笑</p>
				<p class="time">2018-01-01 12:04</p>
			</div>
			<div class="money">
				8.08<b>元</b>
			</div>
		</li>
		<li>
			<img src="images/01.png" />
			<div class="con">
				<p class="tit">李笑笑</p>
				<p class="time">2018-01-01 12:04</p>
			</div>
			<div class="money">
				3.08<b>元</b>
			</div>
		</li>
		<li>
			<img src="images/01.png" />
			<div class="con">
				<p class="tit">李笑笑</p>
				<p class="time">2018-01-01 12:04</p>
			</div>
			<div class="money">
				1.08<b>元</b>
			</div>
		</li>
		<li>
			<img src="images/01.png" />
			<div class="con">
				<p class="tit">李笑笑</p>
				<p class="time">2018-01-01 12:04</p>
			</div>
			<div class="money">
				3.08<b>元</b>
			</div>
		</li>
		<li>
			<img src="images/01.png" />
			<div class="con">
				<p class="tit">李笑笑</p>
				<p class="time">2018-01-01 12:04</p>
			</div>
			<div class="money">
				6.08<b>元</b>
			</div>
		</li>
		<li>
			<img src="images/01.png" />
			<div class="con">
				<p class="tit">李笑笑</p>
				<p class="time">2018-01-01 12:04</p>
			</div>
			<div class="money">
				8.00<b>元</b>
			</div>
		</li>
		<a class="more" href="javascript:;">点击加载更多</a>
	</ul>
</div>

<!-- mask -->
<div id="mask"></div>

<!-- error -->
<div id="error"></div>

<!-- activity_point -->
<div id="activity_point">
	<div class="con">
		<div class="bg"></div>
		<div class="icon"></div>
	</div>	
</div>

<!-- close_btn -->
<div id="close_btn"></div>


<!-- login -->
<div id="login">
	<div id="login_con">
		<h2>输入手机号参与活动</h2>
		<form name="loginForm">
			<div class="con">
				<input type="tel" placeholder="请输入手机号" name="telphone" />
			</div>
			<div class="con">
				<input type="text" placeholder="验证码" name="code" class="code" />
				<div class="line"></div>
				<button type="button" id="send_code">发送验证码</button>
			</div>
			<button type="submit" id="login_btn"></button>
		</form>
	</div>
</div>

<!-- activity_packet -->
<div id="activity_packet">
	<div id="activity_packet_con">
		<div class="text">
			请到e袋洗账户<a href="#">优惠券</a>中查看使用
		</div>
		<div id="packet_money">
			<h2>恭喜您抢到红包</h2>
			<div class="con">
				50<b></b>
			</div>
		</div>
	</div>
</div>

<!-- help_suc -->
<div id="help_suc_line" style="display: none"></div>
<div id="help_suc" style="display: none">
	<h2>助力成功</h2>
	<div id="help_suc_con">
		<span class="help_shi"></span><span class="help_ge"></span><span class="help_jiao"></span><span class="help_fen"></span>
	</div>
</div>


<script type="text/javascript" src="js/jquery-2.1.4.js"></script>
<script type="text/javascript" src="js/fastclick.js"></script>
<script type="text/javascript" src="js/activity.js"></script>
<script>
	//错误提示
	function errorForm(obj){
		$('#error').show().text(obj);
		setTimeout("$('#error').hide()",2000);
	}
	//倒计时
	function countDown(){
		var timer=60;
		var $btn=$('#send_code');
		var setTimer=setInterval(function(){
			if(timer==0){
				timer=60;
				$btn.html('重新获取')
				clearInterval(setTimer);
				$btn.removeAttr('disabled');
			}else{
				$btn.html(timer+'s');
				timer--;
				$btn.attr('disabled','disabled');
			}
		},1000)
	}
	//发送验证码
	$('#send_code').click(function(){
		var telVal=$('input[name=telphone]').val();
		var telReg = /^1\d{10}$/;
		if(telVal==''){
			errorForm('请输入手机号');
			return false;
		}else if(!telReg.test(telVal)){
			errorForm('请输入正确手机号');
			return false;
		}else{
			countDown();
			$.ajax({
				url: '{php echo create_url('homepage/get_sms_code')}',
				type: 'post',
				data:{
					telphone: telVal
				},
				success:function(data){
					console.log(data);
				}
			});
		}
	})
	//立即登陆
	$('#login_btn').click(function(){
		var telVal=$('input[name=telphone]').val();
		var codeVal=$('input[name=code]').val();
		var telReg = /^1\d{10}$/;
		if(telVal==''){
			errorForm('请输入手机号');
			return false;
		}else if(codeVal==''){
			errorForm('请输入验证码');
			return false;
		}else if(!telReg.test(telVal)){
			errorForm('请输入正确手机号');
			return false;
		}else{
			$('#mask').hide();
			$('#login').hide();
			$('#close_btn').hide();
			$.ajax({
				url: 'http://www.baidu.com',
				type: 'post',
				data:{
					telphone: telVal,
					code: codeVal
				},
				success:function(data){
					console.log(data);
				}
			});
		}
	})

	//助力金额
	function activityMoney(obj){
		var num=Number(obj)*100;
		var num_shi=parseInt(num/1000);
		var num_ge=parseInt(num/100-num_shi*10);
		var num_jiao=parseInt(num/10-num_shi*100-num_ge*10);
		var num_fen=parseInt(num-num_shi*1000-num_ge*100-num_jiao*10);
		$('#money_shi').html(num_shi);
		$('#money_ge').html(num_ge);
		$('#money_jiao').html(num_jiao);
		$('#money_fen').html(num_fen);
	}
	activityMoney(12.56);

	//进度条
	function speedAnimate(){
		var money_shi=Number($('#money_shi').text());
		var money_ge=Number($('#money_ge').text());
		var money_jiao=Number($('#money_jiao').text());
		var money_fen=Number($('#money_fen').text());
		var speed_scale=(money_shi*1000+money_ge*100+money_jiao*10+money_fen)/5000;
		var speed_width=speed_scale*209;
		var pos=speed_width-10;

		$('.activity_speed_con').animate({'width':speed_width},1000);
		$('.get_icon').animate({'left':pos},1000,function(){
			if(speed_scale==1){
				$(this).addClass('get_icon0');
			}
		});

	}
	speedAnimate();
	//判断是否登陆
	function showLogin(obj){
		var data=obj.attr('data');
		if(data==''){
			$('#mask').show();
			$('#login').show();
			$('#close_btn').show();
		}else{
			window.location.href="activity_pay.html"
		}
	}
	//支付1元抢红包
	$('#activity_one').click(function(){
		
		showLogin($(this));
	})

	//我也要红包
	$('#activity_want').click(function(){
		showLogin($(this));
	})
	

	//助力成功
	function helpSuc(obj){
		var num=Number(obj)*100;
		var num_shi=parseInt(num/1000);
		var num_ge=parseInt(num/100-num_shi*10);
		var num_jiao=parseInt(num/10-num_shi*100-num_ge*10);
		var num_fen=parseInt(num-num_shi*1000-num_ge*100-num_jiao*10);
		var con=$('#help_suc_con');
		con.find('.help_shi').delay(450).animate({'background-position-y': -29*num_shi},1000);
		con.find('.help_ge').delay(450).animate({'background-position-y': -29*num_ge},1000);
		con.find('.help_jiao').delay(450).animate({'background-position-y': -29*num_jiao},1000);
		con.find('.help_fen').delay(450).animate({'background-position-y': -29*num_fen},1000);
	}
	helpSuc(2.34);
</script>
</body>
</html>